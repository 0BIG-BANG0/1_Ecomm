1. Counter Collection (_id:"cartItemId", value=0)
2. While adding cart items, increment the counter adn then uses counter value as id to cartitem document.


Using Agrregation Pipline

Find the average rating of a productID

db.products.aggregate([
//1. Create document for ratings
{
    $unwind: "$ratings"
},
{
    $group:{
        _id:"$name",
        averageRating:{
            $avg:"$ratings.rating"
        }
    }

}
])


db.products.aggregate([
    //1. Project nameand countOfRating.
    {
    $project:{name:1, countOfRating:{
        $cond:{if:{$isArray:"$ratings"}, then:
        {$size:"$ratings"}, else:0 }}}
    },
    {
        //Stage2 : Sort the  Collection
        $sort:{countOfRating:-1}
    },
    {
        //3.Limit to just 1 itemin result
        $limit: 1
    }
])
